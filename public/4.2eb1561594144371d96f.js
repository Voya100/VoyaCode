(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{"F/us":function(n,l,e){(function(n){var e;!function(){var t="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global||this||{},i=t._,o=Array.prototype,u=Object.prototype,r="undefined"!=typeof Symbol?Symbol.prototype:null,s=o.push,a=o.slice,c=u.toString,h=u.hasOwnProperty,d=Array.isArray,p=Object.keys,f=Object.create,g=function(){},m=function(n){return n instanceof m?n:this instanceof m?void(this._wrapped=n):new m(n)};void 0===l||l.nodeType?t._=m:(void 0!==n&&!n.nodeType&&n.exports&&(l=n.exports=m),l._=m),m.VERSION="1.9.1";var v,y=function(n,l,e){if(void 0===l)return n;switch(null==e?3:e){case 1:return function(e){return n.call(l,e)};case 3:return function(e,t,i){return n.call(l,e,t,i)};case 4:return function(e,t,i,o){return n.call(l,e,t,i,o)}}return function(){return n.apply(l,arguments)}},b=function(n,l,e){return m.iteratee!==v?m.iteratee(n,l):null==n?m.identity:m.isFunction(n)?y(n,l,e):m.isObject(n)&&!m.isArray(n)?m.matcher(n):m.property(n)};m.iteratee=v=function(n,l){return b(n,l,1/0)};var k=function(n,l){return l=null==l?n.length-1:+l,function(){for(var e=Math.max(arguments.length-l,0),t=Array(e),i=0;i<e;i++)t[i]=arguments[i+l];switch(l){case 0:return n.call(this,t);case 1:return n.call(this,arguments[0],t);case 2:return n.call(this,arguments[0],arguments[1],t)}var o=Array(l+1);for(i=0;i<l;i++)o[i]=arguments[i];return o[l]=t,n.apply(this,o)}},w=function(n){if(!m.isObject(n))return{};if(f)return f(n);g.prototype=n;var l=new g;return g.prototype=null,l},T=function(n){return function(l){return null==l?void 0:l[n]}},x=function(n,l){return null!=n&&h.call(n,l)},C=function(n,l){for(var e=l.length,t=0;t<e;t++){if(null==n)return;n=n[l[t]]}return e?n:void 0},P=Math.pow(2,53)-1,M=T("length"),O=function(n){var l=M(n);return"number"==typeof l&&l>=0&&l<=P};m.each=m.forEach=function(n,l,e){var t,i;if(l=y(l,e),O(n))for(t=0,i=n.length;t<i;t++)l(n[t],t,n);else{var o=m.keys(n);for(t=0,i=o.length;t<i;t++)l(n[o[t]],o[t],n)}return n},m.map=m.collect=function(n,l,e){l=b(l,e);for(var t=!O(n)&&m.keys(n),i=(t||n).length,o=Array(i),u=0;u<i;u++){var r=t?t[u]:u;o[u]=l(n[r],r,n)}return o};var _=function(n){return function(l,e,t,i){var o=arguments.length>=3;return function(l,e,t,i){var o=!O(l)&&m.keys(l),u=(o||l).length,r=n>0?0:u-1;for(i||(t=l[o?o[r]:r],r+=n);r>=0&&r<u;r+=n){var s=o?o[r]:r;t=e(t,l[s],s,l)}return t}(l,y(e,i,4),t,o)}};m.reduce=m.foldl=m.inject=_(1),m.reduceRight=m.foldr=_(-1),m.find=m.detect=function(n,l,e){var t=(O(n)?m.findIndex:m.findKey)(n,l,e);if(void 0!==t&&-1!==t)return n[t]},m.filter=m.select=function(n,l,e){var t=[];return l=b(l,e),m.each(n,function(n,e,i){l(n,e,i)&&t.push(n)}),t},m.reject=function(n,l,e){return m.filter(n,m.negate(b(l)),e)},m.every=m.all=function(n,l,e){l=b(l,e);for(var t=!O(n)&&m.keys(n),i=(t||n).length,o=0;o<i;o++){var u=t?t[o]:o;if(!l(n[u],u,n))return!1}return!0},m.some=m.any=function(n,l,e){l=b(l,e);for(var t=!O(n)&&m.keys(n),i=(t||n).length,o=0;o<i;o++){var u=t?t[o]:o;if(l(n[u],u,n))return!0}return!1},m.contains=m.includes=m.include=function(n,l,e,t){return O(n)||(n=m.values(n)),("number"!=typeof e||t)&&(e=0),m.indexOf(n,l,e)>=0},m.invoke=k(function(n,l,e){var t,i;return m.isFunction(l)?i=l:m.isArray(l)&&(t=l.slice(0,-1),l=l[l.length-1]),m.map(n,function(n){var o=i;if(!o){if(t&&t.length&&(n=C(n,t)),null==n)return;o=n[l]}return null==o?o:o.apply(n,e)})}),m.pluck=function(n,l){return m.map(n,m.property(l))},m.where=function(n,l){return m.filter(n,m.matcher(l))},m.findWhere=function(n,l){return m.find(n,m.matcher(l))},m.max=function(n,l,e){var t,i,o=-1/0,u=-1/0;if(null==l||"number"==typeof l&&"object"!=typeof n[0]&&null!=n)for(var r=0,s=(n=O(n)?n:m.values(n)).length;r<s;r++)null!=(t=n[r])&&t>o&&(o=t);else l=b(l,e),m.each(n,function(n,e,t){((i=l(n,e,t))>u||i===-1/0&&o===-1/0)&&(o=n,u=i)});return o},m.min=function(n,l,e){var t,i,o=1/0,u=1/0;if(null==l||"number"==typeof l&&"object"!=typeof n[0]&&null!=n)for(var r=0,s=(n=O(n)?n:m.values(n)).length;r<s;r++)null!=(t=n[r])&&t<o&&(o=t);else l=b(l,e),m.each(n,function(n,e,t){((i=l(n,e,t))<u||i===1/0&&o===1/0)&&(o=n,u=i)});return o},m.shuffle=function(n){return m.sample(n,1/0)},m.sample=function(n,l,e){if(null==l||e)return O(n)||(n=m.values(n)),n[m.random(n.length-1)];var t=O(n)?m.clone(n):m.values(n),i=M(t);l=Math.max(Math.min(l,i),0);for(var o=i-1,u=0;u<l;u++){var r=m.random(u,o),s=t[u];t[u]=t[r],t[r]=s}return t.slice(0,l)},m.sortBy=function(n,l,e){var t=0;return l=b(l,e),m.pluck(m.map(n,function(n,e,i){return{value:n,index:t++,criteria:l(n,e,i)}}).sort(function(n,l){var e=n.criteria,t=l.criteria;if(e!==t){if(e>t||void 0===e)return 1;if(e<t||void 0===t)return-1}return n.index-l.index}),"value")};var R=function(n,l){return function(e,t,i){var o=l?[[],[]]:{};return t=b(t,i),m.each(e,function(l,i){var u=t(l,i,e);n(o,l,u)}),o}};m.groupBy=R(function(n,l,e){x(n,e)?n[e].push(l):n[e]=[l]}),m.indexBy=R(function(n,l,e){n[e]=l}),m.countBy=R(function(n,l,e){x(n,e)?n[e]++:n[e]=1});var D=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;m.toArray=function(n){return n?m.isArray(n)?a.call(n):m.isString(n)?n.match(D):O(n)?m.map(n,m.identity):m.values(n):[]},m.size=function(n){return null==n?0:O(n)?n.length:m.keys(n).length},m.partition=R(function(n,l,e){n[e?0:1].push(l)},!0),m.first=m.head=m.take=function(n,l,e){return null==n||n.length<1?null==l?void 0:[]:null==l||e?n[0]:m.initial(n,n.length-l)},m.initial=function(n,l,e){return a.call(n,0,Math.max(0,n.length-(null==l||e?1:l)))},m.last=function(n,l,e){return null==n||n.length<1?null==l?void 0:[]:null==l||e?n[n.length-1]:m.rest(n,Math.max(0,n.length-l))},m.rest=m.tail=m.drop=function(n,l,e){return a.call(n,null==l||e?1:l)},m.compact=function(n){return m.filter(n,Boolean)};var A=function(n,l,e,t){for(var i=(t=t||[]).length,o=0,u=M(n);o<u;o++){var r=n[o];if(O(r)&&(m.isArray(r)||m.isArguments(r)))if(l)for(var s=0,a=r.length;s<a;)t[i++]=r[s++];else A(r,l,e,t),i=t.length;else e||(t[i++]=r)}return t};m.flatten=function(n,l){return A(n,l,!1)},m.without=k(function(n,l){return m.difference(n,l)}),m.uniq=m.unique=function(n,l,e,t){m.isBoolean(l)||(t=e,e=l,l=!1),null!=e&&(e=b(e,t));for(var i=[],o=[],u=0,r=M(n);u<r;u++){var s=n[u],a=e?e(s,u,n):s;l&&!e?(u&&o===a||i.push(s),o=a):e?m.contains(o,a)||(o.push(a),i.push(s)):m.contains(i,s)||i.push(s)}return i},m.union=k(function(n){return m.uniq(A(n,!0,!0))}),m.intersection=function(n){for(var l=[],e=arguments.length,t=0,i=M(n);t<i;t++){var o=n[t];if(!m.contains(l,o)){var u;for(u=1;u<e&&m.contains(arguments[u],o);u++);u===e&&l.push(o)}}return l},m.difference=k(function(n,l){return l=A(l,!0,!0),m.filter(n,function(n){return!m.contains(l,n)})}),m.unzip=function(n){for(var l=n&&m.max(n,M).length||0,e=Array(l),t=0;t<l;t++)e[t]=m.pluck(n,t);return e},m.zip=k(m.unzip),m.object=function(n,l){for(var e={},t=0,i=M(n);t<i;t++)l?e[n[t]]=l[t]:e[n[t][0]]=n[t][1];return e};var I=function(n){return function(l,e,t){e=b(e,t);for(var i=M(l),o=n>0?0:i-1;o>=0&&o<i;o+=n)if(e(l[o],o,l))return o;return-1}};m.findIndex=I(1),m.findLastIndex=I(-1),m.sortedIndex=function(n,l,e,t){for(var i=(e=b(e,t,1))(l),o=0,u=M(n);o<u;){var r=Math.floor((o+u)/2);e(n[r])<i?o=r+1:u=r}return o};var S=function(n,l,e){return function(t,i,o){var u=0,r=M(t);if("number"==typeof o)n>0?u=o>=0?o:Math.max(o+r,u):r=o>=0?Math.min(o+1,r):o+r+1;else if(e&&o&&r)return t[o=e(t,i)]===i?o:-1;if(i!=i)return(o=l(a.call(t,u,r),m.isNaN))>=0?o+u:-1;for(o=n>0?u:r-1;o>=0&&o<r;o+=n)if(t[o]===i)return o;return-1}};m.indexOf=S(1,m.findIndex,m.sortedIndex),m.lastIndexOf=S(-1,m.findLastIndex),m.range=function(n,l,e){null==l&&(l=n||0,n=0),e||(e=l<n?-1:1);for(var t=Math.max(Math.ceil((l-n)/e),0),i=Array(t),o=0;o<t;o++,n+=e)i[o]=n;return i},m.chunk=function(n,l){if(null==l||l<1)return[];for(var e=[],t=0,i=n.length;t<i;)e.push(a.call(n,t,t+=l));return e};var E=function(n,l,e,t,i){if(!(t instanceof l))return n.apply(e,i);var o=w(n.prototype),u=n.apply(o,i);return m.isObject(u)?u:o};m.bind=k(function(n,l,e){if(!m.isFunction(n))throw new TypeError("Bind must be called on a function");var t=k(function(i){return E(n,t,l,this,e.concat(i))});return t}),m.partial=k(function(n,l){var e=m.partial.placeholder,t=function(){for(var i=0,o=l.length,u=Array(o),r=0;r<o;r++)u[r]=l[r]===e?arguments[i++]:l[r];for(;i<arguments.length;)u.push(arguments[i++]);return E(n,t,this,this,u)};return t}),m.partial.placeholder=m,m.bindAll=k(function(n,l){var e=(l=A(l,!1,!1)).length;if(e<1)throw new Error("bindAll must be passed function names");for(;e--;){var t=l[e];n[t]=m.bind(n[t],n)}}),m.memoize=function(n,l){var e=function(t){var i=e.cache,o=""+(l?l.apply(this,arguments):t);return x(i,o)||(i[o]=n.apply(this,arguments)),i[o]};return e.cache={},e},m.delay=k(function(n,l,e){return setTimeout(function(){return n.apply(null,e)},l)}),m.defer=m.partial(m.delay,m,1),m.throttle=function(n,l,e){var t,i,o,u,r=0;e||(e={});var s=function(){r=!1===e.leading?0:m.now(),t=null,u=n.apply(i,o),t||(i=o=null)},a=function(){var a=m.now();r||!1!==e.leading||(r=a);var c=l-(a-r);return i=this,o=arguments,c<=0||c>l?(t&&(clearTimeout(t),t=null),r=a,u=n.apply(i,o),t||(i=o=null)):t||!1===e.trailing||(t=setTimeout(s,c)),u};return a.cancel=function(){clearTimeout(t),r=0,t=i=o=null},a},m.debounce=function(n,l,e){var t,i,o=function(l,e){t=null,e&&(i=n.apply(l,e))},u=k(function(u){if(t&&clearTimeout(t),e){var r=!t;t=setTimeout(o,l),r&&(i=n.apply(this,u))}else t=m.delay(o,l,this,u);return i});return u.cancel=function(){clearTimeout(t),t=null},u},m.wrap=function(n,l){return m.partial(l,n)},m.negate=function(n){return function(){return!n.apply(this,arguments)}},m.compose=function(){var n=arguments,l=n.length-1;return function(){for(var e=l,t=n[l].apply(this,arguments);e--;)t=n[e].call(this,t);return t}},m.after=function(n,l){return function(){if(--n<1)return l.apply(this,arguments)}},m.before=function(n,l){var e;return function(){return--n>0&&(e=l.apply(this,arguments)),n<=1&&(l=null),e}},m.once=m.partial(m.before,2),m.restArguments=k;var j=!{toString:null}.propertyIsEnumerable("toString"),K=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],z=function(n,l){var e=K.length,t=n.constructor,i=m.isFunction(t)&&t.prototype||u,o="constructor";for(x(n,o)&&!m.contains(l,o)&&l.push(o);e--;)(o=K[e])in n&&n[o]!==i[o]&&!m.contains(l,o)&&l.push(o)};m.keys=function(n){if(!m.isObject(n))return[];if(p)return p(n);var l=[];for(var e in n)x(n,e)&&l.push(e);return j&&z(n,l),l},m.allKeys=function(n){if(!m.isObject(n))return[];var l=[];for(var e in n)l.push(e);return j&&z(n,l),l},m.values=function(n){for(var l=m.keys(n),e=l.length,t=Array(e),i=0;i<e;i++)t[i]=n[l[i]];return t},m.mapObject=function(n,l,e){l=b(l,e);for(var t=m.keys(n),i=t.length,o={},u=0;u<i;u++){var r=t[u];o[r]=l(n[r],r,n)}return o},m.pairs=function(n){for(var l=m.keys(n),e=l.length,t=Array(e),i=0;i<e;i++)t[i]=[l[i],n[l[i]]];return t},m.invert=function(n){for(var l={},e=m.keys(n),t=0,i=e.length;t<i;t++)l[n[e[t]]]=e[t];return l},m.functions=m.methods=function(n){var l=[];for(var e in n)m.isFunction(n[e])&&l.push(e);return l.sort()};var L=function(n,l){return function(e){var t=arguments.length;if(l&&(e=Object(e)),t<2||null==e)return e;for(var i=1;i<t;i++)for(var o=arguments[i],u=n(o),r=u.length,s=0;s<r;s++){var a=u[s];l&&void 0!==e[a]||(e[a]=o[a])}return e}};m.extend=L(m.allKeys),m.extendOwn=m.assign=L(m.keys),m.findKey=function(n,l,e){l=b(l,e);for(var t,i=m.keys(n),o=0,u=i.length;o<u;o++)if(l(n[t=i[o]],t,n))return t};var F,V,B=function(n,l,e){return l in e};m.pick=k(function(n,l){var e={},t=l[0];if(null==n)return e;m.isFunction(t)?(l.length>1&&(t=y(t,l[1])),l=m.allKeys(n)):(t=B,l=A(l,!1,!1),n=Object(n));for(var i=0,o=l.length;i<o;i++){var u=l[i],r=n[u];t(r,u,n)&&(e[u]=r)}return e}),m.omit=k(function(n,l){var e,t=l[0];return m.isFunction(t)?(t=m.negate(t),l.length>1&&(e=l[1])):(l=m.map(A(l,!1,!1),String),t=function(n,e){return!m.contains(l,e)}),m.pick(n,t,e)}),m.defaults=L(m.allKeys,!0),m.create=function(n,l){var e=w(n);return l&&m.extendOwn(e,l),e},m.clone=function(n){return m.isObject(n)?m.isArray(n)?n.slice():m.extend({},n):n},m.tap=function(n,l){return l(n),n},m.isMatch=function(n,l){var e=m.keys(l),t=e.length;if(null==n)return!t;for(var i=Object(n),o=0;o<t;o++){var u=e[o];if(l[u]!==i[u]||!(u in i))return!1}return!0},F=function(n,l,e,t){if(n===l)return 0!==n||1/n==1/l;if(null==n||null==l)return!1;if(n!=n)return l!=l;var i=typeof n;return("function"===i||"object"===i||"object"==typeof l)&&V(n,l,e,t)},V=function(n,l,e,t){n instanceof m&&(n=n._wrapped),l instanceof m&&(l=l._wrapped);var i=c.call(n);if(i!==c.call(l))return!1;switch(i){case"[object RegExp]":case"[object String]":return""+n==""+l;case"[object Number]":return+n!=+n?+l!=+l:0==+n?1/+n==1/l:+n==+l;case"[object Date]":case"[object Boolean]":return+n==+l;case"[object Symbol]":return r.valueOf.call(n)===r.valueOf.call(l)}var o="[object Array]"===i;if(!o){if("object"!=typeof n||"object"!=typeof l)return!1;var u=n.constructor,s=l.constructor;if(u!==s&&!(m.isFunction(u)&&u instanceof u&&m.isFunction(s)&&s instanceof s)&&"constructor"in n&&"constructor"in l)return!1}e=e||[],t=t||[];for(var a=e.length;a--;)if(e[a]===n)return t[a]===l;if(e.push(n),t.push(l),o){if((a=n.length)!==l.length)return!1;for(;a--;)if(!F(n[a],l[a],e,t))return!1}else{var h,d=m.keys(n);if(a=d.length,m.keys(l).length!==a)return!1;for(;a--;)if(!x(l,h=d[a])||!F(n[h],l[h],e,t))return!1}return e.pop(),t.pop(),!0},m.isEqual=function(n,l){return F(n,l)},m.isEmpty=function(n){return null==n||(O(n)&&(m.isArray(n)||m.isString(n)||m.isArguments(n))?0===n.length:0===m.keys(n).length)},m.isElement=function(n){return!(!n||1!==n.nodeType)},m.isArray=d||function(n){return"[object Array]"===c.call(n)},m.isObject=function(n){var l=typeof n;return"function"===l||"object"===l&&!!n},m.each(["Arguments","Function","String","Number","Date","RegExp","Error","Symbol","Map","WeakMap","Set","WeakSet"],function(n){m["is"+n]=function(l){return c.call(l)==="[object "+n+"]"}}),m.isArguments(arguments)||(m.isArguments=function(n){return x(n,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&"function"!=typeof(t.document&&t.document.childNodes)&&(m.isFunction=function(n){return"function"==typeof n||!1}),m.isFinite=function(n){return!m.isSymbol(n)&&isFinite(n)&&!isNaN(parseFloat(n))},m.isNaN=function(n){return m.isNumber(n)&&isNaN(n)},m.isBoolean=function(n){return!0===n||!1===n||"[object Boolean]"===c.call(n)},m.isNull=function(n){return null===n},m.isUndefined=function(n){return void 0===n},m.has=function(n,l){if(!m.isArray(l))return x(n,l);for(var e=l.length,t=0;t<e;t++){var i=l[t];if(null==n||!h.call(n,i))return!1;n=n[i]}return!!e},m.noConflict=function(){return t._=i,this},m.identity=function(n){return n},m.constant=function(n){return function(){return n}},m.noop=function(){},m.property=function(n){return m.isArray(n)?function(l){return C(l,n)}:T(n)},m.propertyOf=function(n){return null==n?function(){}:function(l){return m.isArray(l)?C(n,l):n[l]}},m.matcher=m.matches=function(n){return n=m.extendOwn({},n),function(l){return m.isMatch(l,n)}},m.times=function(n,l,e){var t=Array(Math.max(0,n));l=y(l,e,1);for(var i=0;i<n;i++)t[i]=l(i);return t},m.random=function(n,l){return null==l&&(l=n,n=0),n+Math.floor(Math.random()*(l-n+1))},m.now=Date.now||function(){return(new Date).getTime()};var q={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},N=m.invert(q),G=function(n){var l=function(l){return n[l]},e="(?:"+m.keys(n).join("|")+")",t=RegExp(e),i=RegExp(e,"g");return function(n){return t.test(n=null==n?"":""+n)?n.replace(i,l):n}};m.escape=G(q),m.unescape=G(N),m.result=function(n,l,e){m.isArray(l)||(l=[l]);var t=l.length;if(!t)return m.isFunction(e)?e.call(n):e;for(var i=0;i<t;i++){var o=null==n?void 0:n[l[i]];void 0===o&&(o=e,i=t),n=m.isFunction(o)?o.call(n):o}return n};var H=0;m.uniqueId=function(n){var l=++H+"";return n?n+l:l},m.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var U=/(.)^/,W={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},$=/\\|'|\r|\n|\u2028|\u2029/g,Q=function(n){return"\\"+W[n]};m.template=function(n,l,e){!l&&e&&(l=e),l=m.defaults({},l,m.templateSettings);var t,i=RegExp([(l.escape||U).source,(l.interpolate||U).source,(l.evaluate||U).source].join("|")+"|$","g"),o=0,u="__p+='";n.replace(i,function(l,e,t,i,r){return u+=n.slice(o,r).replace($,Q),o=r+l.length,e?u+="'+\n((__t=("+e+"))==null?'':_.escape(__t))+\n'":t?u+="'+\n((__t=("+t+"))==null?'':__t)+\n'":i&&(u+="';\n"+i+"\n__p+='"),l}),u+="';\n",l.variable||(u="with(obj||{}){\n"+u+"}\n"),u="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+u+"return __p;\n";try{t=new Function(l.variable||"obj","_",u)}catch(n){throw n.source=u,n}var r=function(n){return t.call(this,n,m)};return r.source="function("+(l.variable||"obj")+"){\n"+u+"}",r},m.chain=function(n){var l=m(n);return l._chain=!0,l};var Y=function(n,l){return n._chain?m(l).chain():l};m.mixin=function(n){return m.each(m.functions(n),function(l){var e=m[l]=n[l];m.prototype[l]=function(){var n=[this._wrapped];return s.apply(n,arguments),Y(this,e.apply(m,n))}}),m},m.mixin(m),m.each(["pop","push","reverse","shift","sort","splice","unshift"],function(n){var l=o[n];m.prototype[n]=function(){var e=this._wrapped;return l.apply(e,arguments),"shift"!==n&&"splice"!==n||0!==e.length||delete e[0],Y(this,e)}}),m.each(["concat","join","slice"],function(n){var l=o[n];m.prototype[n]=function(){return Y(this,l.apply(this._wrapped,arguments))}}),m.prototype.value=function(){return this._wrapped},m.prototype.valueOf=m.prototype.toJSON=m.prototype.value,m.prototype.toString=function(){return String(this._wrapped)},void 0===(e=(function(){return m}).apply(l,[]))||(n.exports=e)}()}).call(this,e("YuTi")(n))},Wrcm:function(n,l,e){"use strict";e.r(l);var t=e("CcnG"),i=function(){},o=e("pMnS"),u=function(){function n(){this.boardSize=8,this.whiteComputer=!1,this.blackComputer=!0,this.boardReversed=!1,this.defaultPositions=["RKBQXBKR","PPPPPPPP"],this.changeReversed(!1),this.positions=this.defaultPositions}return n.prototype.changeMode=function(n){switch(n){case 0:this.whiteComputer=!1,this.blackComputer=!0;break;case 1:this.whiteComputer=!1,this.blackComputer=!1;break;case 2:this.whiteComputer=!0,this.blackComputer=!0}},n.prototype.setPositions=function(n,l){this.positions=[l,n]},n.prototype.resetPositions=function(){this.positions=this.defaultPositions},n.prototype.changeReversed=function(n){var l=this;this.boardReversed=n,this.boardTilePositions=n?Array(this.boardSize).fill(1).map(function(n,e){return Array(l.boardSize).fill(1).map(function(n,l){return[e,7-l]})}):Array(this.boardSize).fill(1).map(function(n,e){return Array(l.boardSize).fill(1).map(function(n,l){return[l,e]})})},n}(),r=e("F/us"),s=function(){function n(l,e,t){this.whites=[],this.whiteHits=[],this.blacks=[],this.blackHits=[],this.x=l,this.y=e,this.game=t,n.board=t.board}return n.tileExists=function(l,e){return 0<=e&&e<n.board.length&&0<=l&&l<n.board[e].length},n.prototype.addMover=function(n){n.white?this.whites.push(n):this.blacks.push(n)},n.prototype.addHitter=function(n){n.white?this.whiteHits.push(n):this.blackHits.push(n)},n.prototype.clear=function(){this.whites=[],this.whiteHits=[],this.blacks=[],this.blackHits=[]},n.prototype.select=function(n){if(!this.game.gameActive||!this.game.turn)return!1;this.empty()||this.piece.color!==n.color?null!=n.activePiece&&n.activePiece.canMove(this)?(this.game.turn=!1,n.activePiece.move(this.x,this.y),this.highlight(!0),n.activePiece=null):(this.clearHighlights(),n.activePiece=null):(this.highlight(!0),n.activePiece=this.piece,this.piece.highlightMovableTiles())},n.prototype.isFriendOf=function(n){return!this.empty()&&this.piece.color===n.color},n.prototype.isEnemyOf=function(n){return!this.empty()&&this.piece.color!==n.color},n.prototype.empty=function(){return null==this.piece},n.prototype.highlight=function(l){void 0===l&&(l=!1),l?(n.highligtedTile=this,n.highlightedMovableTiles=[]):n.highlightedMovableTiles.push(this)},n.prototype.clearHighlights=function(){n.highligtedTile=null,n.highlightedMovableTiles=[]},n.prototype.highlighted=function(){return this===n.highligtedTile},n.prototype.markedMovable=function(){return r.contains(n.highlightedMovableTiles,this)},n.prototype.protectsKing=function(n){return!(0===n.kings.length||!this.empty()&&"king"===this.piece.type)&&this.protectsTile(n.kings[0].tile,n)},n.prototype.protectsTile=function(n,l){if(!1===this.tilesBetween(n)||this.tilesBetween(n).filter(function(n){return!n.empty()}).length>0)return!1;var e=this.x<n.x?-1:1,t=this.y<n.y?-1:1;if(this.x===n.x)for(var i=this.y+t;0<=i&&i<8;i+=t){if((u=this.game.board[i][this.x]).isEnemyOf(l)&&("rook"===u.piece.type||"queen"===u.piece.type))return!0;if(!u.empty())break}if(this.y===n.y)for(var o=this.x+e;0<=o&&o<8;o+=e){if((u=this.game.board[this.y][o]).isEnemyOf(l)&&("rook"===u.piece.type||"queen"===u.piece.type))return!0;if(!u.empty())break}if(Math.abs(this.y-n.y)===Math.abs(this.x-n.x))for(o=this.x+e,i=this.y+t;0<=o&&o<8&&0<=i&&i<8;o+=e,i+=t){var u;if((u=this.game.board[i][o]).isEnemyOf(l)&&("bishop"===u.piece.type||"queen"===u.piece.type))return!0;if(!u.empty())break}return!1},n.prototype.riskValue=function(n){var l=0,e=this[n.player.enemy.color+"Hits"],t=this[n.color+"Hits"],i=n.threats();if((e.length>0||n.tile.protectsTile(this,n.player))&&(l+=n.value,e.length>0&&t.length>1&&this.game.lowestTile(e,!1).piece.value>=n.value&&(l-=2),"king"===n.type&&(l+=100)),i.length>=1&&0===n.friends().length?l-=n.value/2:i.length>=1&&this.game.lowestTile(i,!1).piece.value<n.value&&(l-=n.value/3),"pawn"===n.type&&("black"===n.color&&6===n.tile.y&&5===n.tile.x||"white"===n.color&&1===n.tile.y&&2===n.tile.x)&&1===n.friends().length&&(l+=2),this.isEnemyOf(n)&&(l-=this.piece.value),n.value<=5)for(var o=0,u="pawn"===n.type?r.difference(n.player.pieces,n.player.pawns):r.union(n.player.queens,n.player.kings);o<u.length;o++){var s=u[o];if(n.tile.protectsTile(s.tile,n.player)&&0===s.friends().length&&!this.protectsTile(s.tile,n.player)){l+=s.value/2,"king"===s.type&&(l+=1e3);break}}if(n.player.prevTile===this&&(l+=.3),n.player.prevPiece===n&&(l+=.1*n.player.moveCount),"pawn"===n.type){var a=Math.abs((n.white?0:7)-n.y());1===a&&0===e.length?l-=5:n.player.kingChaseCount>5&&(l-=.3*(7-a))}return l},n.prototype.tilesBetween=function(n){var l=0,e=0;if(this.x!==n.x&&this.y!==n.y&&Math.abs(this.x-n.x)!==Math.abs(this.y-n.y))return!1;this.x!==n.x&&(l=this.x<n.x?1:-1),this.y!==n.y&&(e=this.y<n.y?1:-1);for(var t=[],i=this.x+l,o=this.y+e;o!==n.y||i!==n.x;i+=l,o+=e)t.push(this.game.board[o][i]);return t},n.prototype.isBetween=function(n,l){var e=Math.min(n.x,l.x),t=Math.max(n.x,l.x),i=Math.min(n.y,l.y),o=Math.max(n.y,l.y);return this.x===n.x&&n.x===l.x&&i<this.y&&this.y<o||this.y===n.y&&n.y===l.y&&e<this.x&&this.x<t||Math.abs(this.x-n.x)===Math.abs(this.y-n.y)&&Math.abs(this.x-l.x)===Math.abs(this.y-l.y)&&Math.abs(l.x-n.x)===Math.abs(l.y-n.y)},n.prototype.checkDirections=function(n,l,e){var t=[];return t=t.concat(this.checkDirection(n,l,e)),0!==n&&(t=t.concat(this.checkDirection(-n,l,e))),0!==l&&(t=t.concat(this.checkDirection(n,-l,e))),0!==n&&0!==l&&(t=t.concat(this.checkDirection(-n,-l,e))),t},n.prototype.checkDirection=function(l,e,t){1!==t&&(t=8);for(var i=[],o=this.x,u=this.y,r=1;r<t+1;r++)if(o+l*r<8&&o+l*r>=0&&u+e*r<8&&u+e*r>=0){var s=n.board[u+e*r][o+l*r];if(i.push(s),!s.empty())break}return i},n.highligtedTile=null,n.highlightedMovableTiles=[],n}(),a=e("mrSG"),c=function(){function n(n,l){this.moveTiles=[],this.hitTiles=[],this.dead=!1,this.color=n.color,this.white="white"===this.color,this.tile=l,this.player=n,this.tiles=n.game.board,this.moveTiles=[],this.hitTiles=[],this.protectsKing=!1}return n.prototype.friends=function(){return this.tile[this.color+"Hits"]},n.prototype.threats=function(){return this.tile[this.player.enemy.color+"Hits"]},n.prototype.x=function(){return this.tile.x},n.prototype.y=function(){return this.tile.y},n.prototype.move=function(n,l,e){var t=this;void 0===e&&(e=!0),this.tile.piece=null,this.player.prevTile=this.tile,this.player.prevPiece!==this&&(this.player.moveCount=0),this.player.prevPiece=this,this.player.moveCount++,this.tile=this.player.game.board[l][n],this.tile.empty()||this.tile.piece.die(),this.tile.piece=this;var i=this.player.game.gameId;e&&setTimeout(function(){return t.player.game.changeTurn(i)},650)},n.prototype.canMove=function(n){return-1!==this.moveTiles.indexOf(n)},n.prototype.highlightMovableTiles=function(){for(var n=0,l=this.moveTiles;n<l.length;n++)l[n].highlight(!1)},n.prototype.checkDirections=function(n,l,e,t){var i=[];return i=i.concat(this.checkDirection(n,l,e,t)),0!==n&&(i=i.concat(this.checkDirection(-n,l,e,t))),0!==l&&(i=i.concat(this.checkDirection(n,-l,e,t))),0!==n&&0!==l&&(i=i.concat(this.checkDirection(-n,-l,e,t))),i},n.prototype.checkDirection=function(n,l,e,t){for(var i=this.tile.checkDirection(n,l,e),o=0,u=i;o<u.length;o++){var s=u[o];this.hitTiles.push(s),s.addHitter(this),s.isFriendOf(this)&&(i=r.without(i,s))}return i},n.prototype.clearTiles=function(){this.player.moveTiles=r.without(this.player.moveTiles,this.tile),this.moveTiles=[],this.hitTiles=[]},n.prototype.addTiles=function(){for(var n=0,l=this.moveTiles;n<l.length;n++){var e=l[n];this.player.moveTiles.push(e),e.addMover(this)}this.player.hitTiles=this.player.hitTiles.concat(this.hitTiles)},n.prototype.die=function(){this.clearTiles(),this.player.pieces=r.without(this.player.pieces,this),this.player[this.type+"s"]=r.without(this.player[this.type+"s"],this),this.dead=!0,"king"===this.type&&0===this.player.kingCount()?this.player.game.gameOver(this.player):0===this.player.pieceCount()&&this.player.game.gameOver(this.player)},n}(),h=function(n){function l(l,e){var t=n.call(this,l,e)||this;return t.type="bishop",t.value=5,t}return Object(a.__extends)(l,n),l.prototype.tileCheck=function(){this.clearTiles(),this.moveTiles=this.moveTiles.concat(this.checkDirections(1,1,8,!0)),this.addTiles()},l}(c),d=function(n){function l(l,e){var t=n.call(this,l,e)||this;return t.type="king",t.value=10,t.hasMoved=!1,t}return Object(a.__extends)(l,n),l.prototype.move=function(l,e){2===Math.abs(this.x()-l)&&this.castling(l,e),n.prototype.move.call(this,l,e),this.hasMoved=!0},l.prototype.castling=function(n,l){var e=this.tiles[l][n],t=n<this.x()?-1:1,i=e.checkDirection(t,0,8),o=i[i.length-1];o.empty()||"rook"!==o.piece.type?console.log("Error: Invalid castling call"):o.piece.move(n-t,l,!1)},l.prototype.tileCheck=function(){this.clearTiles(),this.moveTiles=this.moveTiles.concat(this.checkDirections(1,0,1,!0)),this.moveTiles=this.moveTiles.concat(this.checkDirections(0,1,1,!0)),this.moveTiles=this.moveTiles.concat(this.checkDirections(1,1,1,!0)),this.addTiles()},l.prototype.castlingCheck=function(){if(!this.hasMoved&&0===this.threats().length)for(var n=0,l=this.player.rooks;n<l.length;n++){var e=l[n],t=this.castlingTargetTile(e);this.canDoCastlingWithRook(e,t)&&(this.moveTiles.push(t),this.player.moveTiles.push(t),t.addMover(this))}},l.prototype.canDoCastlingWithRook=function(n,l){var e=this;if(n.hasMoved||n.y()!==this.y()||null==l)return!1;var t=l.tilesBetween(this.tile);t.push(l);var i=t.filter(function(n){return!n.empty()}),o=t.filter(function(n){return 0!==n[e.player.enemy.color+"Hits"].length});return 0===i.length&&0===o.length},l.prototype.castlingTargetTile=function(n){var l=this.x()+2*(n.x()<this.x()?-1:1);return s.tileExists(l,this.y())?this.tiles[this.y()][l]:null},l}(c),p=function(n){function l(l,e){var t=n.call(this,l,e)||this;return t.type="knight",t.value=4,t}return Object(a.__extends)(l,n),l.prototype.tileCheck=function(){this.clearTiles(),this.moveTiles=this.moveTiles.concat(this.checkDirections(2,1,1,!0)),this.moveTiles=this.moveTiles.concat(this.checkDirections(1,2,1,!0)),this.addTiles()},l}(c),f=function(n){function l(l,e){var t=n.call(this,l,e)||this;return t.type="pawn",t.value=1,t.xStart=e.x,t.yStart=e.y,t.yDir=t.white?-1:1,t}return Object(a.__extends)(l,n),l.prototype.tileCheck=function(){this.clearTiles(),this.x();var n=this.y();this.checkVerticalTile(1),this.yStart===n&&this.checkVerticalTile(2),this.checkDiagonalTile(1),this.checkDiagonalTile(-1),this.addTiles()},l.prototype.checkVerticalTile=function(n){var l=this.y()+n*this.yDir;if(s.tileExists(this.x(),l)){var e=this.tiles[l][this.x()];e.empty()&&0===e.tilesBetween(this.tile).filter(function(n){return!n.empty()}).length&&this.moveTiles.push(e)}},l.prototype.checkDiagonalTile=function(n){var l=this.x(),e=this.y();if(s.tileExists(l+n,e)){var t=this.tiles[e+this.yDir][l+n],i=this.tiles[e][l+n];(t.isEnemyOf(this)||this.canUseEnPassant(i))&&this.moveTiles.push(t),this.hitTiles.push(t),t.addHitter(this)}},l.prototype.canUseEnPassant=function(n){if(n.isEnemyOf(this)&&"pawn"===n.piece.type)return n.piece.isEnPassantable()},l.prototype.move=function(l,e){var t=this;this.setEnPassantability(e),this.tryToDoEnPassant(l,e),n.prototype.move.call(this,l,e),0!==e&&7!==e||setTimeout(function(){t.die(),t.player.game.addPiece(t.x(),t.y(),t.player,"Q")},500)},l.prototype.tryToDoEnPassant=function(n,l){var e=this.player.game.board[l][n];n!==this.x()&&e.empty()&&this.player.game.board[l-this.yDir][n].piece.die()},l.prototype.setEnPassantability=function(n){2===Math.abs(this.y()-n)&&(this.enPassantRound=this.player.game.round)},l.prototype.isEnPassantable=function(){return this.enPassantRound===this.player.game.round},l}(c),g=function(n){function l(l,e){var t=n.call(this,l,e)||this;return t.type="queen",t.value=7,t}return Object(a.__extends)(l,n),l.prototype.tileCheck=function(){this.clearTiles(),this.moveTiles=this.moveTiles.concat(this.checkDirections(1,0,8,!0)),this.moveTiles=this.moveTiles.concat(this.checkDirections(0,1,8,!0)),this.moveTiles=this.moveTiles.concat(this.checkDirections(1,1,7,!0)),this.addTiles()},l}(c),m=function(n){function l(l,e){var t=n.call(this,l,e)||this;return t.type="rook",t.value=5,t.hasMoved=!1,t}return Object(a.__extends)(l,n),l.prototype.move=function(l,e,t){void 0===t&&(t=!0),n.prototype.move.call(this,l,e,t),this.hasMoved=!0},l.prototype.tileCheck=function(){this.clearTiles(),this.moveTiles=this.moveTiles.concat(this.checkDirections(1,0,8,!0)),this.moveTiles=this.moveTiles.concat(this.checkDirections(0,1,8,!0)),this.addTiles()},l}(c),v=function(){function n(n,l){this.pieceId=0,this.pieces=[],this.kings=[],this.queens=[],this.rooks=[],this.bishops=[],this.knights=[],this.pawns=[],this.moveTiles=[],this.hitTiles=[],this.prevTile=null,this.prevPiece=null,this.moveCount=0,this.kingChaseCount=0,this.activePiece=null,this.turn=!1,this.enemy=null,this.pieceDecision=null,this.tileDecision=null,this.color=n,this.game=l,this.pieceId=0}return n.prototype.pieceCount=function(){return this.pieces.length},n.prototype.kingCount=function(){return this.kings.length},n.prototype.setAction=function(n){this.pieceDecision=n[0],this.tileDecision=n[1]},n.prototype.getAction=function(){return[this.pieceDecision,this.tileDecision]},n.prototype.addPiece=function(n){this.pieces.push(n),this[n.type+"s"].push(n)},n.prototype.checkAllTiles=function(){this.moveTiles=[],this.hitTiles=[];for(var n=0;n<this.pieceCount();n++)this.pieces[n].tileCheck()},n.prototype.findKingProtectors=function(){for(var n=0;n<this.pieceCount();n++)this.pieces[n].protectsKing=this.pieces[n].tile.protectsKing(this)},n.prototype.checkCastlingMoves=function(){for(var n=0;n<this.kingCount();n++)this.kings[n].castlingCheck()},n}(),y=function(n){function l(l,e){return n.call(this,l,e)||this}return Object(a.__extends)(l,n),l.prototype.chooseAction=function(){this.setAction([null,null])},l}(v);function b(n){return 0===n.length?n:n[Math.floor(Math.random()*n.length)]}var k=function(n){function l(l,e){var t=n.call(this,l,e)||this;return t.safeTiles=[],t.hitTiles=[],t.dangerTiles=[],t.pieceLocations=[],t.enemyLocations=[],t.colors=t.color+"s",t}return Object(a.__extends)(l,n),l.prototype.chooseAction=function(){this.chooseTarget()},l.prototype.actionDecided=function(){return null!=this.pieceDecision&&null!=this.tileDecision},l.prototype.setMove=function(n){n[2]<this.riskValue&&(this.movePiece=n[0],this.moveTile=n[1],this.riskValue=n[2])},l.prototype.setMoveToDecision=function(){this.setAction([this.movePiece,this.moveTile])},l.prototype.chooseTarget=function(){if(this.chooseActionInit(),this.tryToKillTheKing(),this.actionDecided())console.log("1. Kill the king");else if(this.protectTheKings(),this.actionDecided())console.log("2. Protect the king");else{if(this.tryToGetCloseToEnemyKing(),this.actionDecided())return console.log("3. Approach enemy king"),void this.kingChaseCount++;if(this.kingChaseCount=0,this.tryToMakeARisklessMove(),this.actionDecided())console.log("4. Kill enemy or move to safety");else if(this.tryToApproachEnemyKing(2),this.actionDecided())console.log("5. Approach king");else{if(null!=this.movePiece)return console.log("6. Safe random"),void this.setMoveToDecision();console.log("7. Random"),this.moveToRandom()}}},l.prototype.chooseActionInit=function(){this.safeTiles=[],this.hitTiles=[],this.dangerTiles=[],this.pieceLocations=[],this.enemyLocations=[],this.ecolors=this.enemy.color+"s",this.pieceDecision=null,this.tileDecision=null;for(var n=0;n<this.pieceCount();n++)this.pieceLocations.push(this.pieces[n].tile);for(n=0;n<this.enemy.pieceCount();n++)this.enemyLocations.push(this.enemy.pieces[n].tile);this.safeTiles=r.difference(this.moveTiles,this.enemy.hitTiles),this.hitTiles=r.intersection(this.hitTiles,this.enemyLocations),this.dangerTiles=r.intersection(this.enemy.moveTiles,this.pieceLocations),this.moveTile=null,this.movePiece=null,this.riskValue=100},l.prototype.tryToKillTheKing=function(){for(var n=0,l=this.enemy.kings;n<l.length;n++){var e=l[n];if(e.threats().length>0)return console.log("Can kill the king"),void this.setAction([b(e.threats()),e.tile])}},l.prototype.protectTheKings=function(){for(var n=0,l=this.kings;n<l.length;n++){var e=l[n];r.contains(this.dangerTiles,e.tile)&&(console.log("King in danger"),this.protectKing(e))}},l.prototype.protectKing=function(n){if(this.movePiece=null,n.threats.length>1&&(this.tryToMovePieceToSafety(n),this.setMoveToDecision(),this.actionDecided()))console.log("2.1 Move the king");else{var l=b(n.tile[this.ecolors]);this.tryToKillKingsThreat(l),this.actionDecided()?console.log("2.2 Kill enemy threat"):(this.tryToMovePieceToSafety(n,l),this.tryToBlockEnemy(n,l),this.setMoveToDecision())}},l.prototype.tryToMovePieceToSafety=function(n,l){void 0===l&&(l=null);var e=r.intersection(n.moveTiles,this.safeTiles);"pawn"!==l.type&&"knight"!==l.type&&(e=e.filter(function(e){return!n.tile.isBetween(e,l.tile)})),e.length>0&&this.setMove(this.findSmallestRisk([n],e))},l.prototype.tryToKillKingsThreat=function(n){var l=n.threats().filter(function(n){return!n.protectsKing});if(this.movePiece=null,this.riskValue=100,l.length>0)if(console.log("Threat can be killed"),n.friends().length>0){this.moveTile=n.tile;var e=this.findSmallestRisk(l,[this.moveTile]);this.movePiece=e[0],this.riskValue=e[2]}else this.setAction(this.findSmallestRisk(l,[n.tile]))},l.prototype.tryToBlockEnemy=function(n,l){if("knight"!==l.type)for(var e=0,t=n.tile.tilesBetween(l.tile);e<t.length;e++){var i=t[e],o=i[this.colors].filter(function(l){return!l.protectsKing&&l!==n});o.length>0&&this.setMove(this.findSmallestRisk(o,[i]))}},l.prototype.tryToGetCloseToEnemyKing=function(){this.moveCount<=4&&this.kingChaseCount<=6&&this.tryToApproachEnemyKing(1)},l.prototype.tryToApproachEnemyKing=function(n){for(var l=0,e=this.enemy.kings;l<e.length;l++){var t=this.approachTile(e[l].tile,this.moveTiles,"all",!0,n);if(t.length>0)return void this.setAction(this.findSmallestRisk(t,[],1))}},l.prototype.tryToMakeARisklessMove=function(){this.movePiece=null,this.moveTile=null,this.riskValue=100;for(var n=0,l=this.pieces;n<l.length;n++){var e=l[n];if(0!==e.moveTiles.length){var t=this.findSmallestRisk([e],e.moveTiles);3===t.length&&this.setMove(t)}}this.riskValue<0&&this.setAction([this.movePiece,this.moveTile])},l.prototype.moveToRandom=function(){this.moveTile=b(this.moveTiles),this.movePiece=b(this.moveTile[this.colors]),this.setMoveToDecision()},l.prototype.findSmallestRisk=function(n,l,e){void 0===e&&(e=0);for(var t=1e3,i=[],o=0,u=n;o<u.length;o++){var r=u[o];1===e&&(l=[r[1]],r=r[0]);for(var s=0,a=l;s<a.length;s++){var c=a[s],h=c.riskValue(r);h<=t&&(h<t&&(i=[]),i.push([r,c,h]),t=h)}}return b(i)},l.prototype.approachTile=function(n,l,e,t,i){void 0===i&&(i=1);var o=[],u=[],s=this;return"all"!==e&&"rook"!==e||(o=(o=o.concat(n.checkDirections(1,0,8))).concat(n.checkDirections(0,1,8)),1===i&&(o=r.intersection(o,l)),o=o.filter(function(n){return!n.isFriendOf(s)}),u=this.approachTileLoop(o,u,["rook","queen"],l,"rook",t,i)),"all"!==e&&"bishop"!==e||(o=n.checkDirections(1,1,8),1===i&&(o=r.intersection(o,this.moveTiles)),o=o.filter(function(n){return!n.isFriendOf(s)}),u=this.approachTileLoop(o,u,["bishop","queen"],l,"bishop",t,i)),"all"!==e&&"knight"!==e||(o=(o=n.checkDirections(2,1,1)).concat(n.checkDirections(1,2,1)),1===i&&(o=r.intersection(o,this.moveTiles)),o=o.filter(function(n){return!n.isFriendOf(s)}),u=this.approachTileLoop(o,u,["knight"],l,"knight",t,i)),u},l.prototype.approachTileLoop=function(n,l,e,t,i,o,u){for(var s=0,a=n;s<a.length;s++){var c=a[s];if(!(o&&c[this.enemy.color+"Hits"].length>0))if(2===u)l=l.concat(this.approachTile(c,t,i,o,1));else for(var h=0,d=c[this.color+"s"];h<d.length;h++){var p=d[h];p===this.prevPiece&&this.moveCount>3||!p.protectsKing&&r.contains(e,p.type)&&l.push([p,c])}}return l},l}(v),w=function(){function n(n){this.settings=n,this.board=[],this.gameActive=!1,this.gamePaused=!1,this.gameId=0}return n.prototype.reset=function(){var n=this;this.gameActive=!1,this.gameId++,this.board=[],this.white=this.settings.whiteComputer?new k("white",this):new y("white",this),this.black=this.settings.blackComputer?new k("black",this):new y("black",this),this.white.enemy=this.black,this.black.enemy=this.white,this.activePlayer=this.white,this.winner=null,this.round=1,this.setUp(),this.gameActive=!0,this.turn=!0,setTimeout(function(){return n.run()},500)},n.prototype.setUp=function(){this.fillBoard(),this.addPieces(),this.doTileChecks(),this.turn=!0},n.prototype.fillBoard=function(){this.board=[];for(var n=0;n<8;n++){this.board[n]=[];for(var l=0;l<8;l++)this.board[n][l]=new s(l,n,this)}},n.prototype.addPieces=function(){for(var n=this.settings.positions[0]+"_".repeat(8-this.settings.positions[0].length),l=this.settings.positions[1]+"_".repeat(8-this.settings.positions[1].length),e=0;e<8;e++)this.addPiece(e,7,this.white,n[e]),this.addPiece(e,0,this.black,n[e]),this.addPiece(e,6,this.white,l[e]),this.addPiece(e,1,this.black,l[e])},n.prototype.addPiece=function(n,l,e,t){var i,o=this.board[l][n];switch(e.pieceId++,t){case"P":i=new f(e,o);break;case"R":i=new m(e,o);break;case"B":i=new h(e,o);break;case"K":i=new p(e,o);break;case"Q":i=new g(e,o);break;case"X":i=new d(e,o);break;default:return void(i=null)}e.addPiece(i),this.board[l][n].piece=i},n.prototype.doTileChecks=function(){this.clearTiles(),this.white.checkAllTiles(),this.black.checkAllTiles(),this.white.checkCastlingMoves(),this.black.checkCastlingMoves(),this.white.findKingProtectors(),this.black.findKingProtectors()},n.prototype.clearTiles=function(){for(var n=0;n<8;n++)for(var l=0;l<8;l++)this.board[n][l].clear()},n.prototype.run=function(){if(this.gameActive&&this.turn&&!this.gamePaused){this.activePlayer.chooseAction();var n=this.activePlayer.getAction();this.makeTurn(n[0],n[1])}},n.prototype.makeTurn=function(n,l){null!=n&&null!=l&&(n.tile.select(this.activePlayer),l.select(this.activePlayer))},n.prototype.gameOver=function(n){this.winner=n.enemy,this.gameActive=!1},n.prototype.changeTurn=function(n){if(n===this.gameId){if(this.doTileChecks(),this.activePlayer=this.activePlayer.enemy,"white"===this.activePlayer.color&&(this.round+=1),0===this.activePlayer.moveTiles.length)return void this.gameOver(this.activePlayer);this.turn=!0,this.run()}},n.prototype.lowestTile=function(n,l){for(var e=100,t=n[0],i=l?n:n.map(function(n){return n.tile}),o=0;o<i.length;o++)!i[o].empty()&&i[o].piece.value<e&&(e=i[o].piece.value,t=i[o]);return t},n}(),T=function(){function n(n,l){this.settings=n,this.game=l,this.close=new t.EventEmitter}return n.prototype.switchGameMode=function(n){this.settings.changeMode(n),this.close.emit(),this.game.reset()},n}(),x=t["\u0275crt"]({encapsulation:0,styles:[['.interface[_ngcontent-%COMP%]{-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;z-index:10;font-family:"Times New Roman",serif,Times;box-sizing:border-box}.interface[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{background:#eee;border:2px solid #000;border-radius:5px;cursor:pointer;font-family:Helvetica,Verdana,sans-serif;margin:6px;padding:.4em;font-size:90%;list-style-type:none;text-align:center}[_nghost-%COMP%]{width:320px;height:260px}h1[_ngcontent-%COMP%]{margin:7px 0}']],data:{}});function C(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,8,"div",[["class","interface"]],null,null,null,null,null)),(n()(),t["\u0275eld"](1,0,null,null,1,"h1",[],null,null,null,null,null)),(n()(),t["\u0275ted"](-1,null,["Game modes"])),(n()(),t["\u0275eld"](3,0,null,null,1,"li",[["title","Play against the computer AI."]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.switchGameMode(0)&&t),t},null,null)),(n()(),t["\u0275ted"](-1,null,["Player vs computer"])),(n()(),t["\u0275eld"](5,0,null,null,1,"li",[["title","Challenge a friend to a game of chess."]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.switchGameMode(1)&&t),t},null,null)),(n()(),t["\u0275ted"](-1,null,["Local multiplayer"])),(n()(),t["\u0275eld"](7,0,null,null,1,"li",[["title","Watch while computer AIs try to annihilate each other."]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.switchGameMode(2)&&t),t},null,null)),(n()(),t["\u0275ted"](-1,null,["Computer vs computer"]))],null,null)}var P=e("gIcY"),M=function(){function n(n,l){this.settings=n,this.game=l,this.close=new t.EventEmitter,this.upperRow=n.positions[1],this.lowerRow=n.positions[0],this.boardReversed=n.boardReversed}return n.prototype.saveSettings=function(){this.settings.setPositions(this.upperRow,this.lowerRow),this.boardReversed!==this.settings.boardReversed&&this.settings.changeReversed(this.boardReversed),this.close.emit(),this.game.reset()},n.prototype.resetLayout=function(){this.settings.resetPositions(),this.boardReversed!==this.settings.boardReversed&&this.settings.changeReversed(this.boardReversed),this.close.emit(),this.game.reset()},n}(),O=t["\u0275crt"]({encapsulation:0,styles:[['.interface[_ngcontent-%COMP%]{-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;z-index:10;font-family:"Times New Roman",serif,Times;box-sizing:border-box}.interface[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{background:#eee;border:2px solid #000;border-radius:5px;cursor:pointer;font-family:Helvetica,Verdana,sans-serif;margin:6px;padding:.4em;font-size:90%;list-style-type:none;text-align:center}[_nghost-%COMP%]{width:320px;height:280px;font-size:14px}@media screen and (max-width:500px){[_nghost-%COMP%]{font-size:10px}}h1[_ngcontent-%COMP%]{margin:7px 0}table[_ngcontent-%COMP%]{margin:auto}td[_ngcontent-%COMP%]{padding:5px}input[_ngcontent-%COMP%]{font-family:monospace}']],data:{}});function _(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,57,"div",[["class","interface"]],null,null,null,null,null)),(n()(),t["\u0275eld"](1,0,null,null,1,"h1",[],null,null,null,null,null)),(n()(),t["\u0275ted"](-1,null,["Settings"])),(n()(),t["\u0275ted"](-1,null,[" Change piece layout"])),(n()(),t["\u0275eld"](4,0,null,null,0,"br",[],null,null,null,null,null)),(n()(),t["\u0275eld"](5,0,null,null,40,"form",[["autocomplete","off"],["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(n,l,e){var i=!0;return"submit"===l&&(i=!1!==t["\u0275nov"](n,7).onSubmit(e)&&i),"reset"===l&&(i=!1!==t["\u0275nov"](n,7).onReset()&&i),i},null,null)),t["\u0275did"](6,16384,null,0,P.r,[],null,null),t["\u0275did"](7,4210688,null,0,P.l,[[8,null],[8,null]],null,null),t["\u0275prd"](2048,null,P.c,null,[P.l]),t["\u0275did"](9,16384,null,0,P.k,[[4,P.c]],null,null),(n()(),t["\u0275eld"](10,0,null,null,35,"table",[],null,null,null,null,null)),(n()(),t["\u0275eld"](11,0,null,null,34,"tbody",[],null,null,null,null,null)),(n()(),t["\u0275eld"](12,0,null,null,22,"tr",[],null,null,null,null,null)),(n()(),t["\u0275eld"](13,0,null,null,9,"td",[],null,null,null,null,null)),(n()(),t["\u0275ted"](-1,null,["Row 1: "])),(n()(),t["\u0275eld"](15,0,null,null,7,"input",[["maxlength","8"],["name","upperRow"],["size","8"],["type","text"]],[[1,"maxlength",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(n,l,e){var i=!0,o=n.component;return"input"===l&&(i=!1!==t["\u0275nov"](n,16)._handleInput(e.target.value)&&i),"blur"===l&&(i=!1!==t["\u0275nov"](n,16).onTouched()&&i),"compositionstart"===l&&(i=!1!==t["\u0275nov"](n,16)._compositionStart()&&i),"compositionend"===l&&(i=!1!==t["\u0275nov"](n,16)._compositionEnd(e.target.value)&&i),"ngModelChange"===l&&(i=!1!==(o.upperRow=e)&&i),i},null,null)),t["\u0275did"](16,16384,null,0,P.d,[t.Renderer2,t.ElementRef,[2,P.a]],null,null),t["\u0275did"](17,540672,null,0,P.f,[],{maxlength:[0,"maxlength"]},null),t["\u0275prd"](1024,null,P.g,function(n){return[n]},[P.f]),t["\u0275prd"](1024,null,P.h,function(n){return[n]},[P.d]),t["\u0275did"](20,671744,null,0,P.m,[[2,P.c],[6,P.g],[8,null],[6,P.h]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),t["\u0275prd"](2048,null,P.i,null,[P.m]),t["\u0275did"](22,16384,null,0,P.j,[[4,P.i]],null,null),(n()(),t["\u0275eld"](23,0,null,null,5,"td",[["rowspan","2"]],null,null,null,null,null)),(n()(),t["\u0275ted"](-1,null,["P: Pawn"])),(n()(),t["\u0275eld"](25,0,null,null,0,"br",[],null,null,null,null,null)),(n()(),t["\u0275ted"](-1,null,["R: Rook"])),(n()(),t["\u0275eld"](27,0,null,null,0,"br",[],null,null,null,null,null)),(n()(),t["\u0275ted"](-1,null,["X: King"])),(n()(),t["\u0275eld"](29,0,null,null,5,"td",[["rowspan","2"]],null,null,null,null,null)),(n()(),t["\u0275ted"](-1,null,["K: Knight"])),(n()(),t["\u0275eld"](31,0,null,null,0,"br",[],null,null,null,null,null)),(n()(),t["\u0275ted"](-1,null,["B: Bishop"])),(n()(),t["\u0275eld"](33,0,null,null,0,"br",[],null,null,null,null,null)),(n()(),t["\u0275ted"](-1,null,["Q: Queen"])),(n()(),t["\u0275eld"](35,0,null,null,10,"tr",[],null,null,null,null,null)),(n()(),t["\u0275eld"](36,0,null,null,9,"td",[],null,null,null,null,null)),(n()(),t["\u0275ted"](-1,null,["Row 2: "])),(n()(),t["\u0275eld"](38,0,null,null,7,"input",[["maxlength","8"],["name","lowerRow"],["size","8"],["type","text"]],[[1,"maxlength",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(n,l,e){var i=!0,o=n.component;return"input"===l&&(i=!1!==t["\u0275nov"](n,39)._handleInput(e.target.value)&&i),"blur"===l&&(i=!1!==t["\u0275nov"](n,39).onTouched()&&i),"compositionstart"===l&&(i=!1!==t["\u0275nov"](n,39)._compositionStart()&&i),"compositionend"===l&&(i=!1!==t["\u0275nov"](n,39)._compositionEnd(e.target.value)&&i),"ngModelChange"===l&&(i=!1!==(o.lowerRow=e)&&i),i},null,null)),t["\u0275did"](39,16384,null,0,P.d,[t.Renderer2,t.ElementRef,[2,P.a]],null,null),t["\u0275did"](40,540672,null,0,P.f,[],{maxlength:[0,"maxlength"]},null),t["\u0275prd"](1024,null,P.g,function(n){return[n]},[P.f]),t["\u0275prd"](1024,null,P.h,function(n){return[n]},[P.d]),t["\u0275did"](43,671744,null,0,P.m,[[2,P.c],[6,P.g],[8,null],[6,P.h]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),t["\u0275prd"](2048,null,P.i,null,[P.m]),t["\u0275did"](45,16384,null,0,P.j,[[4,P.i]],null,null),(n()(),t["\u0275eld"](46,0,null,null,7,"label",[["title","Turns game board 90 degrees"]],null,null,null,null,null)),(n()(),t["\u0275eld"](47,0,null,null,5,"input",[["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],function(n,l,e){var i=!0,o=n.component;return"change"===l&&(i=!1!==t["\u0275nov"](n,48).onChange(e.target.checked)&&i),"blur"===l&&(i=!1!==t["\u0275nov"](n,48).onTouched()&&i),"ngModelChange"===l&&(i=!1!==(o.boardReversed=e)&&i),i},null,null)),t["\u0275did"](48,16384,null,0,P.b,[t.Renderer2,t.ElementRef],null,null),t["\u0275prd"](1024,null,P.h,function(n){return[n]},[P.b]),t["\u0275did"](50,671744,null,0,P.m,[[8,null],[8,null],[8,null],[6,P.h]],{model:[0,"model"]},{update:"ngModelChange"}),t["\u0275prd"](2048,null,P.i,null,[P.m]),t["\u0275did"](52,16384,null,0,P.j,[[4,P.i]],null,null),(n()(),t["\u0275ted"](-1,null,[" Reversed board"])),(n()(),t["\u0275eld"](54,0,null,null,1,"li",[["title","Changing settings will reset the game."]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.saveSettings()&&t),t},null,null)),(n()(),t["\u0275ted"](-1,null,["Save settings"])),(n()(),t["\u0275eld"](56,0,null,null,1,"li",[["title","Puts pieces to their original places and resets the game."]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.resetLayout()&&t),t},null,null)),(n()(),t["\u0275ted"](-1,null,["Reset layout"]))],function(n,l){var e=l.component;n(l,17,0,"8"),n(l,20,0,"upperRow",e.upperRow),n(l,40,0,"8"),n(l,43,0,"lowerRow",e.lowerRow),n(l,50,0,e.boardReversed)},function(n,l){n(l,5,0,t["\u0275nov"](l,9).ngClassUntouched,t["\u0275nov"](l,9).ngClassTouched,t["\u0275nov"](l,9).ngClassPristine,t["\u0275nov"](l,9).ngClassDirty,t["\u0275nov"](l,9).ngClassValid,t["\u0275nov"](l,9).ngClassInvalid,t["\u0275nov"](l,9).ngClassPending),n(l,15,0,t["\u0275nov"](l,17).maxlength?t["\u0275nov"](l,17).maxlength:null,t["\u0275nov"](l,22).ngClassUntouched,t["\u0275nov"](l,22).ngClassTouched,t["\u0275nov"](l,22).ngClassPristine,t["\u0275nov"](l,22).ngClassDirty,t["\u0275nov"](l,22).ngClassValid,t["\u0275nov"](l,22).ngClassInvalid,t["\u0275nov"](l,22).ngClassPending),n(l,38,0,t["\u0275nov"](l,40).maxlength?t["\u0275nov"](l,40).maxlength:null,t["\u0275nov"](l,45).ngClassUntouched,t["\u0275nov"](l,45).ngClassTouched,t["\u0275nov"](l,45).ngClassPristine,t["\u0275nov"](l,45).ngClassDirty,t["\u0275nov"](l,45).ngClassValid,t["\u0275nov"](l,45).ngClassInvalid,t["\u0275nov"](l,45).ngClassPending),n(l,47,0,t["\u0275nov"](l,52).ngClassUntouched,t["\u0275nov"](l,52).ngClassTouched,t["\u0275nov"](l,52).ngClassPristine,t["\u0275nov"](l,52).ngClassDirty,t["\u0275nov"](l,52).ngClassValid,t["\u0275nov"](l,52).ngClassInvalid,t["\u0275nov"](l,52).ngClassPending)})}var R=function(){},D=t["\u0275crt"]({encapsulation:0,styles:[['.interface[_ngcontent-%COMP%]{-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;z-index:10;font-family:"Times New Roman",serif,Times;box-sizing:border-box}.interface[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{background:#eee;border:2px solid #000;border-radius:5px;cursor:pointer;font-family:Helvetica,Verdana,sans-serif;margin:6px;padding:.4em;font-size:90%;list-style-type:none;text-align:center}[_nghost-%COMP%]{width:100%;height:100%;font-size:90%;overflow-y:auto}img[_ngcontent-%COMP%]{width:50px;height:50px}@media screen and (max-width:800px){img[_ngcontent-%COMP%]{width:30px;height:30px}}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{text-align:left}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{vertical-align:top}']],data:{}});function A(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,70,"div",[["class","interface"]],null,null,null,null,null)),(n()(),t["\u0275eld"](1,0,null,null,1,"h1",[],null,null,null,null,null)),(n()(),t["\u0275ted"](-1,null,["Instructions"])),(n()(),t["\u0275ted"](-1,null,[" The goal of chess is to capture the enemy king. Once that is done, the game will end and the winner declared. The game will also end if a player doesn't have any legal moves left. "])),(n()(),t["\u0275eld"](4,0,null,null,0,"br",[],null,null,null,null,null)),(n()(),t["\u0275ted"](-1,null,["A player captures an enemy piece by moving their piece to their tile. Captured pieces are removed from the game. Each player does always one move each turn. Skipping isn't possible. White player always starts the game. "])),(n()(),t["\u0275eld"](6,0,null,null,0,"br",[],null,null,null,null,null)),(n()(),t["\u0275eld"](7,0,null,null,1,"h1",[],null,null,null,null,null)),(n()(),t["\u0275ted"](-1,null,["Pieces"])),(n()(),t["\u0275eld"](9,0,null,null,61,"table",[],null,null,null,null,null)),(n()(),t["\u0275eld"](10,0,null,null,60,"tbody",[],null,null,null,null,null)),(n()(),t["\u0275eld"](11,0,null,null,12,"tr",[],null,null,null,null,null)),(n()(),t["\u0275eld"](12,0,null,null,1,"td",[],null,null,null,null,null)),(n()(),t["\u0275eld"](13,0,null,null,0,"img",[["src","images/chess/white-pawn.png"]],null,null,null,null,null)),(n()(),t["\u0275eld"](14,0,null,null,9,"td",[],null,null,null,null,null)),(n()(),t["\u0275eld"](15,0,null,null,1,"b",[],null,null,null,null,null)),(n()(),t["\u0275ted"](-1,null,["Pawns"])),(n()(),t["\u0275ted"](-1,null,[" are the most common piece. Pawns can move 1 square forward if it isn't occupied by another piece. On the first move they can alternatively move 2 squares. "])),(n()(),t["\u0275eld"](18,0,null,null,0,"br",[],null,null,null,null,null)),(n()(),t["\u0275ted"](-1,null,["Pawns can normally only capture pieces that are on diagonal squares in front of them. "])),(n()(),t["\u0275eld"](20,0,null,null,0,"br",[],null,null,null,null,null)),(n()(),t["\u0275ted"](-1,null,["If an enemy pawn moves next to pawn (horizontally) by moving 2 squares, pawn can capture it with en passant special move. In en passant pawn moves diagonally behind the enemy pawn and captures it. "])),(n()(),t["\u0275eld"](22,0,null,null,0,"br",[],null,null,null,null,null)),(n()(),t["\u0275ted"](-1,null,["Once a pawn reaches other end of the board, it is automatically promoted to queen."])),(n()(),t["\u0275eld"](24,0,null,null,8,"tr",[],null,null,null,null,null)),(n()(),t["\u0275eld"](25,0,null,null,1,"td",[],null,null,null,null,null)),(n()(),t["\u0275eld"](26,0,null,null,0,"img",[["src","images/chess/white-knight.png"]],null,null,null,null,null)),(n()(),t["\u0275eld"](27,0,null,null,5,"td",[],null,null,null,null,null)),(n()(),t["\u0275eld"](28,0,null,null,1,"b",[],null,null,null,null,null)),(n()(),t["\u0275ted"](-1,null,["Knights"])),(n()(),t["\u0275ted"](-1,null,[" can move to any of the closest squares that aren't horizontal, vertical or diagonal. "])),(n()(),t["\u0275eld"](31,0,null,null,0,"br",[],null,null,null,null,null)),(n()(),t["\u0275ted"](-1,null,["Their moves form L shape: 2 forward, 1 left/right. Knights can jump over other pieces."])),(n()(),t["\u0275eld"](33,0,null,null,6,"tr",[],null,null,null,null,null)),(n()(),t["\u0275eld"](34,0,null,null,1,"td",[],null,null,null,null,null)),(n()(),t["\u0275eld"](35,0,null,null,0,"img",[["src","images/chess/white-rook.png"]],null,null,null,null,null)),(n()(),t["\u0275eld"](36,0,null,null,3,"td",[],null,null,null,null,null)),(n()(),t["\u0275eld"](37,0,null,null,1,"b",[],null,null,null,null,null)),(n()(),t["\u0275ted"](-1,null,["Rooks"])),(n()(),t["\u0275ted"](-1,null,[" can move horizontally and vertically to any direction any number of squares, but can't jump over other pieces."])),(n()(),t["\u0275eld"](40,0,null,null,6,"tr",[],null,null,null,null,null)),(n()(),t["\u0275eld"](41,0,null,null,1,"td",[],null,null,null,null,null)),(n()(),t["\u0275eld"](42,0,null,null,0,"img",[["src","images/chess/white-bishop.png"]],null,null,null,null,null)),(n()(),t["\u0275eld"](43,0,null,null,3,"td",[],null,null,null,null,null)),(n()(),t["\u0275eld"](44,0,null,null,1,"b",[],null,null,null,null,null)),(n()(),t["\u0275ted"](-1,null,["Bishops"])),(n()(),t["\u0275ted"](-1,null,[" can move diagonally to any direction any number of squares, but can't jump over other pieces."])),(n()(),t["\u0275eld"](47,0,null,null,6,"tr",[],null,null,null,null,null)),(n()(),t["\u0275eld"](48,0,null,null,1,"td",[],null,null,null,null,null)),(n()(),t["\u0275eld"](49,0,null,null,0,"img",[["src","images/chess/white-queen.png"]],null,null,null,null,null)),(n()(),t["\u0275eld"](50,0,null,null,3,"td",[],null,null,null,null,null)),(n()(),t["\u0275eld"](51,0,null,null,1,"b",[],null,null,null,null,null)),(n()(),t["\u0275ted"](-1,null,["Queens"])),(n()(),t["\u0275ted"](-1,null,[" have same moves as rooks and bishops (all horizontal, vertical and diagonal squares)."])),(n()(),t["\u0275eld"](54,0,null,null,16,"tr",[],null,null,null,null,null)),(n()(),t["\u0275eld"](55,0,null,null,1,"td",[],null,null,null,null,null)),(n()(),t["\u0275eld"](56,0,null,null,0,"img",[["src","images/chess/white-king.png"]],null,null,null,null,null)),(n()(),t["\u0275eld"](57,0,null,null,13,"td",[],null,null,null,null,null)),(n()(),t["\u0275eld"](58,0,null,null,1,"b",[],null,null,null,null,null)),(n()(),t["\u0275ted"](-1,null,["King"])),(n()(),t["\u0275ted"](-1,null,[" is the most valuable piece - once the king is captured, the game ends. "])),(n()(),t["\u0275eld"](61,0,null,null,0,"br",[],null,null,null,null,null)),(n()(),t["\u0275ted"](-1,null,["King can move one square to any direction. "])),(n()(),t["\u0275eld"](63,0,null,null,0,"br",[],null,null,null,null,null)),(n()(),t["\u0275ted"](-1,null,["King also has a special move, castling, which moves king 2 steps towards a rook and moves rook behind the king. This has following conditions: "])),(n()(),t["\u0275eld"](65,0,null,null,0,"br",[],null,null,null,null,null)),(n()(),t["\u0275ted"](-1,null,["1. King and rook must have not moved during the game (and must be on same row). "])),(n()(),t["\u0275eld"](67,0,null,null,0,"br",[],null,null,null,null,null)),(n()(),t["\u0275ted"](-1,null,["2. There can't be any pieces between the king and the rook. "])),(n()(),t["\u0275eld"](69,0,null,null,0,"br",[],null,null,null,null,null)),(n()(),t["\u0275ted"](-1,null,["3. The king must not be in check, and king must not pass through a tile that could be attacked by enemy player in their next turn. "]))],null,null)}var I=function(){function n(n){this.game=n,this.switchDialogEvent=new t.EventEmitter;var l=n.winner.color;this.winnerColor=l[0].toUpperCase()+l.slice(1)}return n.prototype.switchDialog=function(n){this.switchDialogEvent.emit(n),this.game.winner=null},n.prototype.ngOnDestroy=function(){this.game.winner=null},n}(),S=t["\u0275crt"]({encapsulation:0,styles:[['.interface[_ngcontent-%COMP%]{-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;z-index:10;font-family:"Times New Roman",serif,Times;box-sizing:border-box}.interface[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{background:#eee;border:2px solid #000;border-radius:5px;cursor:pointer;font-family:Helvetica,Verdana,sans-serif;margin:6px;padding:.4em;font-size:90%;list-style-type:none;text-align:center}[_nghost-%COMP%]{width:320px;height:260px}h1[_ngcontent-%COMP%]{margin:7px 0}']],data:{}});function E(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,8,"div",[["class","interface"]],null,null,null,null,null)),(n()(),t["\u0275eld"](1,0,null,null,1,"h1",[["id","win-message"]],null,null,null,null,null)),(n()(),t["\u0275ted"](2,null,[""," wins!"])),(n()(),t["\u0275eld"](3,0,null,null,1,"li",[],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.game.reset()&&t),t},null,null)),(n()(),t["\u0275ted"](-1,null,["Play again"])),(n()(),t["\u0275eld"](5,0,null,null,1,"li",[["title","Choose game mode."]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.switchDialog("chooseMode")&&t),t},null,null)),(n()(),t["\u0275ted"](-1,null,["Switch game mode"])),(n()(),t["\u0275eld"](7,0,null,null,1,"li",[["title","Change piece layout."]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.switchDialog("settings")&&t),t},null,null)),(n()(),t["\u0275ted"](-1,null,["Change settings"]))],null,function(n,l){n(l,2,0,l.component.winnerColor)})}var j=e("ZYCi"),K=e("Ip0R"),z=function(){function n(n,l){this.game=n,this.settings=l,this.visibleDialog="",this.game.reset()}return n.prototype.reset=function(){this.visibleDialog="",this.game.reset()},n.prototype.activePlayerColor=function(){var n=this.game.activePlayer;return null==n?"White":this.capitalize(n.color)},n.prototype.capitalize=function(n){return n.charAt(0).toUpperCase()+n.slice(1)},n.prototype.switchDialog=function(n){this.visibleDialog=this.visibleDialog===n?"":n,""===this.visibleDialog?(this.game.gamePaused=!1,this.game.run()):this.game.gamePaused=!0},n}(),L=t["\u0275crt"]({encapsulation:0,styles:[[".interface[_ngcontent-%COMP%]{-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;z-index:10;font-family:\"Times New Roman\",serif,Times;box-sizing:border-box}[_nghost-%COMP%]:after{content:'';display:table;clear:both}.interface[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{background:#eee;border:2px solid #000;border-radius:5px;cursor:pointer;font-family:Helvetica,Verdana,sans-serif;margin:6px;padding:.4em;font-size:90%;list-style-type:none;text-align:center}[_nghost-%COMP%]{display:block;border:2px solid #000;background:silver;margin:auto;max-width:800px}.container[_ngcontent-%COMP%]{max-width:640px;width:80%;padding-top:80%;background:#000;position:relative;float:left;border-left:3px solid #000}@media screen and (max-width:500px){.container[_ngcontent-%COMP%]{width:75%;padding-top:75%}}.side-menu[_ngcontent-%COMP%]{width:20%;height:100%;max-width:160px;float:left;padding:3px 6px 3px 3px;margin-right:-3px;font-size:14px}@media screen and (max-width:500px){.side-menu[_ngcontent-%COMP%]{width:25%;font-size:10px}.side-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:2px;margin:2px}}chess-choose-mode[_ngcontent-%COMP%], chess-instructions[_ngcontent-%COMP%], chess-settings[_ngcontent-%COMP%], chess-winner-dialog[_ngcontent-%COMP%]{left:50%;top:50%;transform:translate(-50%,-50%);-webkit-transform:translate(-50%,-50%);position:absolute;max-width:90%;max-height:90%;background:silver;border:5px solid gray;border-radius:5px;text-align:center;z-index:10}chess-instructions[_ngcontent-%COMP%]{max-width:98%;max-height:98%}"]],data:{animation:[{type:7,name:"fadeIn",definitions:[{type:0,name:"true",styles:{type:6,styles:{opacity:1},offset:null},options:void 0},{type:0,name:"void",styles:{type:6,styles:{opacity:0},offset:null},options:void 0},{type:1,expr:"* => *",animation:{type:4,styles:null,timings:"300ms"},options:null}],options:{}}]}});function F(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"chess-choose-mode",[],[[24,"@fadeIn",0]],[[null,"close"]],function(n,l,e){var t=!0;return"close"===l&&(t=!1!==n.component.switchDialog("")&&t),t},C,x)),t["\u0275did"](1,49152,null,0,T,[u,w],null,{close:"close"})],null,function(n,l){n(l,0,0,void 0)})}function V(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"chess-settings",[],[[24,"@fadeIn",0]],[[null,"close"]],function(n,l,e){var t=!0;return"close"===l&&(t=!1!==n.component.switchDialog("")&&t),t},_,O)),t["\u0275did"](1,49152,null,0,M,[u,w],null,{close:"close"})],null,function(n,l){n(l,0,0,void 0)})}function B(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"chess-instructions",[],[[24,"@fadeIn",0]],[[null,"close"]],function(n,l,e){var t=!0;return"close"===l&&(t=!1!==n.component.switchDialog("")&&t),t},A,D)),t["\u0275did"](1,49152,null,0,R,[],null,null)],null,function(n,l){n(l,0,0,void 0)})}function q(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"chess-winner-dialog",[],[[24,"@fadeIn",0]],[[null,"switchDialogEvent"]],function(n,l,e){var t=!0;return"switchDialogEvent"===l&&(t=!1!==n.component.switchDialog(e)&&t),t},E,S)),t["\u0275did"](1,180224,null,0,I,[w],null,{switchDialogEvent:"switchDialogEvent"})],null,function(n,l){n(l,0,0,void 0)})}function N(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,32,"section",[["class","side-menu interface"]],null,null,null,null,null)),(n()(),t["\u0275eld"](1,0,null,null,23,"table",[],null,null,null,null,null)),(n()(),t["\u0275eld"](2,0,null,null,22,"tbody",[],null,null,null,null,null)),(n()(),t["\u0275eld"](3,0,null,null,3,"tr",[],null,null,null,null,null)),(n()(),t["\u0275eld"](4,0,null,null,2,"td",[["colspan","2"]],null,null,null,null,null)),(n()(),t["\u0275eld"](5,0,null,null,1,"b",[],null,null,null,null,null)),(n()(),t["\u0275ted"](-1,null,["Game stats"])),(n()(),t["\u0275eld"](7,0,null,null,2,"tr",[],null,null,null,null,null)),(n()(),t["\u0275eld"](8,0,null,null,1,"td",[["colspan","2"],["id","turn"]],null,null,null,null,null)),(n()(),t["\u0275ted"](9,null,["","'s turn"])),(n()(),t["\u0275eld"](10,0,null,null,4,"tr",[],null,null,null,null,null)),(n()(),t["\u0275eld"](11,0,null,null,1,"td",[],null,null,null,null,null)),(n()(),t["\u0275ted"](-1,null,["Round:"])),(n()(),t["\u0275eld"](13,0,null,null,1,"td",[],null,null,null,null,null)),(n()(),t["\u0275ted"](14,null,["",""])),(n()(),t["\u0275eld"](15,0,null,null,4,"tr",[],null,null,null,null,null)),(n()(),t["\u0275eld"](16,0,null,null,1,"td",[],null,null,null,null,null)),(n()(),t["\u0275ted"](-1,null,["White:"])),(n()(),t["\u0275eld"](18,0,null,null,1,"td",[],null,null,null,null,null)),(n()(),t["\u0275ted"](19,null,[""," pieces"])),(n()(),t["\u0275eld"](20,0,null,null,4,"tr",[],null,null,null,null,null)),(n()(),t["\u0275eld"](21,0,null,null,1,"td",[],null,null,null,null,null)),(n()(),t["\u0275ted"](-1,null,["Black:"])),(n()(),t["\u0275eld"](23,0,null,null,1,"td",[],null,null,null,null,null)),(n()(),t["\u0275ted"](24,null,[""," pieces"])),(n()(),t["\u0275eld"](25,0,null,null,1,"li",[["class","play-again"],["title","Resets the game."]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.reset()&&t),t},null,null)),(n()(),t["\u0275ted"](-1,null,["Reset game"])),(n()(),t["\u0275eld"](27,0,null,null,1,"li",[["class","game-mode-button"],["title","Choose game mode."]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.switchDialog("chooseMode")&&t),t},null,null)),(n()(),t["\u0275ted"](-1,null,["Game mode"])),(n()(),t["\u0275eld"](29,0,null,null,1,"li",[["class","settings-button"],["title","Change piece layout."]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.switchDialog("settings")&&t),t},null,null)),(n()(),t["\u0275ted"](-1,null,["Settings"])),(n()(),t["\u0275eld"](31,0,null,null,1,"li",[["class","instructions-button"],["title","Read the instructions."]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.switchDialog("instructions")&&t),t},null,null)),(n()(),t["\u0275ted"](-1,null,["Instructions"])),(n()(),t["\u0275eld"](33,0,null,null,10,"section",[["class","container"]],null,null,null,null,null)),(n()(),t["\u0275eld"](34,16777216,null,null,1,"router-outlet",[],null,null,null,null,null)),t["\u0275did"](35,212992,null,0,j.r,[j.b,t.ViewContainerRef,t.ComponentFactoryResolver,[8,null],t.ChangeDetectorRef],null,null),(n()(),t["\u0275and"](16777216,null,null,1,null,F)),t["\u0275did"](37,16384,null,0,K.i,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,V)),t["\u0275did"](39,16384,null,0,K.i,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,B)),t["\u0275did"](41,16384,null,0,K.i,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,q)),t["\u0275did"](43,16384,null,0,K.i,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(n,l){var e=l.component;n(l,35,0),n(l,37,0,"chooseMode"==e.visibleDialog),n(l,39,0,"settings"==e.visibleDialog),n(l,41,0,"instructions"==e.visibleDialog),n(l,43,0,""==e.visibleDialog&&null!=e.game.winner)},function(n,l){var e=l.component;n(l,9,0,e.activePlayerColor()),n(l,14,0,e.game.round),n(l,19,0,null==e.game.white?null:e.game.white.pieces.length),n(l,24,0,null==e.game.black?null:e.game.black.pieces.length)})}var G=e("NY0S"),H=e("HH0y"),U=function(){function n(){}return n.prototype.ngOnInit=function(){},n}(),W=t["\u0275crt"]({encapsulation:0,styles:[["[_nghost-%COMP%]{min-width:304px;max-width:1000px;margin:auto;width:100%;display:block;position:relative}h1[_ngcontent-%COMP%]{text-align:center}.google_badge[_ngcontent-%COMP%]{display:block;width:240px;margin:auto}.google_badge[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:240px}"]],data:{}});function $(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"h1",[],null,null,null,null,null)),(n()(),t["\u0275ted"](-1,null,["Chess"])),(n()(),t["\u0275eld"](2,0,null,null,1,"chess-game",[],null,null,null,N,L)),t["\u0275did"](3,49152,null,0,z,[w,u],null,null),(n()(),t["\u0275eld"](4,0,null,null,1,"a",[["class","google_badge"],["href","https://play.google.com/store/apps/details?id=com.voyacode.chess&pcampaignid=MKT-Other-global-all-co-prtnr-py-PartBadge-Mar2515-1"]],null,null,null,null,null)),(n()(),t["\u0275eld"](5,0,null,null,0,"img",[["alt","Get it on Google Play"],["src","images/hangman/google-play-badge.png"]],null,null,null,null,null)),(n()(),t["\u0275eld"](6,0,null,null,71,"description-box",[],null,null,null,G.b,G.a)),t["\u0275did"](7,49152,null,0,H.a,[],null,null),(n()(),t["\u0275ted"](-1,0,[" This chess game has 3 game modes. In "])),(n()(),t["\u0275eld"](9,0,null,0,1,"b",[],null,null,null,null,null)),(n()(),t["\u0275ted"](-1,null,["Player vs computer"])),(n()(),t["\u0275ted"](-1,0,[" you can challenge the computer AI and see if you're smarter than a machine. If you have friends you want to challenge, you can use "])),(n()(),t["\u0275eld"](12,0,null,0,1,"b",[],null,null,null,null,null)),(n()(),t["\u0275ted"](-1,null,["Local multiplayer"])),(n()(),t["\u0275ted"](-1,0,[" mode (needs to be played on the same monitor). If you feel a little lazy, you can let the computer AI do the moves for you in "])),(n()(),t["\u0275eld"](15,0,null,0,1,"b",[],null,null,null,null,null)),(n()(),t["\u0275ted"](-1,null,["Computer vs computer"])),(n()(),t["\u0275ted"](-1,0,[" mode. "])),(n()(),t["\u0275eld"](18,0,null,0,0,"br",[],null,null,null,null,null)),(n()(),t["\u0275eld"](19,0,null,0,0,"br",[],null,null,null,null,null)),(n()(),t["\u0275ted"](-1,0,["With settings you can change the piece layout and make your own chess game. Ever wondered what it would be like to play chess if all pawns were queens? Now you can find out! (If there is more than one king, all kings need to be captured. If there aren't any kings, all enemy pieces need to be captured.) "])),(n()(),t["\u0275eld"](21,0,null,0,0,"br",[],null,null,null,null,null)),(n()(),t["\u0275eld"](22,0,null,0,0,"br",[],null,null,null,null,null)),(n()(),t["\u0275ted"](-1,0,["This version of chess has some small changes to the traditional rules: "])),(n()(),t["\u0275eld"](24,0,null,0,0,"br",[],null,null,null,null,null)),(n()(),t["\u0275ted"](-1,0,["- In promotion pawn is automatically promoted to queen. "])),(n()(),t["\u0275eld"](26,0,null,0,0,"br",[],null,null,null,null,null)),(n()(),t["\u0275ted"](-1,0,["- The game will only end once the king is captured, or if a player can't make any moves. Game doesn't prevent players from doing moves which leave king vulnerable. "])),(n()(),t["\u0275eld"](28,0,null,0,0,"br",[],null,null,null,null,null)),(n()(),t["\u0275eld"](29,0,null,0,0,"br",[],null,null,null,null,null)),(n()(),t["\u0275ted"](-1,0,["The game is also available for free on "])),(n()(),t["\u0275eld"](31,0,null,0,1,"a",[["href","https://play.google.com/store/apps/details?id=com.voyacode.chess&pcampaignid=MKT-Other-global-all-co-prtnr-py-PartBadge-Mar2515-1"]],null,null,null,null,null)),(n()(),t["\u0275ted"](-1,null,["Google Play"])),(n()(),t["\u0275ted"](-1,0,[" for android devices. It has various extra features and improvements, so check it out. "])),(n()(),t["\u0275eld"](34,0,null,0,0,"br",[],null,null,null,null,null)),(n()(),t["\u0275eld"](35,0,null,0,0,"br",[],null,null,null,null,null)),(n()(),t["\u0275ted"](-1,0,["The code can be found at "])),(n()(),t["\u0275eld"](37,0,null,0,1,"a",[["href","https://github.com/Voya100/VoyaCode/tree/master/app/projects/chess"]],null,null,null,null,null)),(n()(),t["\u0275ted"](-1,null,["Github"])),(n()(),t["\u0275ted"](-1,0,[". The code of the android version can be found "])),(n()(),t["\u0275eld"](40,0,null,0,1,"a",[["href","https://github.com/Voya100/ReactNativeChess"]],null,null,null,null,null)),(n()(),t["\u0275ted"](-1,null,["here"])),(n()(),t["\u0275ted"](-1,0,[". "])),(n()(),t["\u0275eld"](43,0,null,0,0,"br",[],null,null,null,null,null)),(n()(),t["\u0275eld"](44,0,null,0,0,"br",[],null,null,null,null,null)),(n()(),t["\u0275ted"](-1,0,["Update (01.05.2017): "])),(n()(),t["\u0275eld"](46,0,null,0,0,"br",[],null,null,null,null,null)),(n()(),t["\u0275ted"](-1,0,["- En passant and castling moves added. "])),(n()(),t["\u0275eld"](48,0,null,0,0,"br",[],null,null,null,null,null)),(n()(),t["\u0275ted"](-1,0,["- The game will end if player doesn't have any possible moves. "])),(n()(),t["\u0275eld"](50,0,null,0,0,"br",[],null,null,null,null,null)),(n()(),t["\u0275ted"](-1,0,["- Promotion has a higher priority, making infinite king chases less likely. "])),(n()(),t["\u0275eld"](52,0,null,0,0,"br",[],null,null,null,null,null)),(n()(),t["\u0275ted"](-1,0,["- Board has been flipped 90 degrees. This can be changed in settings. "])),(n()(),t["\u0275eld"](54,0,null,0,0,"br",[],null,null,null,null,null)),(n()(),t["\u0275ted"](-1,0,["- Move tiles that have enemies are now in red. "])),(n()(),t["\u0275eld"](56,0,null,0,0,"br",[],null,null,null,null,null)),(n()(),t["\u0275ted"](-1,0,["- Game now scales on smaller screens. "])),(n()(),t["\u0275eld"](58,0,null,0,0,"br",[],null,null,null,null,null)),(n()(),t["\u0275ted"](-1,0,["- Game is now written in Angular (previously jQuery) and code has been improved. "])),(n()(),t["\u0275eld"](60,0,null,0,0,"br",[],null,null,null,null,null)),(n()(),t["\u0275eld"](61,0,null,0,0,"br",[],null,null,null,null,null)),(n()(),t["\u0275ted"](-1,0,["Update (11.06.2017): "])),(n()(),t["\u0275eld"](63,0,null,0,0,"br",[],null,null,null,null,null)),(n()(),t["\u0275ted"](-1,0,["- Fixed a logical error in AI in which pawns got higher priority in situations where they shouldn't have. "])),(n()(),t["\u0275eld"](65,0,null,0,0,"br",[],null,null,null,null,null)),(n()(),t["\u0275ted"](-1,0,["- Pieces that protect the king can now move even when they are protecting the king, if the king remains protected. "])),(n()(),t["\u0275eld"](67,0,null,0,0,"br",[],null,null,null,null,null)),(n()(),t["\u0275ted"](-1,0,["- Piece positions have been corrected. "])),(n()(),t["\u0275eld"](69,0,null,0,0,"br",[],null,null,null,null,null)),(n()(),t["\u0275ted"](-1,0,["- Chess game is now also available on "])),(n()(),t["\u0275eld"](71,0,null,0,1,"a",[["href","https://play.google.com/store/apps/details?id=com.voyacode.chess&pcampaignid=MKT-Other-global-all-co-prtnr-py-PartBadge-Mar2515-1"]],null,null,null,null,null)),(n()(),t["\u0275ted"](-1,null,["Google Play"])),(n()(),t["\u0275ted"](-1,0,["! "])),(n()(),t["\u0275eld"](74,0,null,0,0,"br",[],null,null,null,null,null)),(n()(),t["\u0275eld"](75,0,null,0,0,"br",[],null,null,null,null,null)),(n()(),t["\u0275eld"](76,0,null,0,1,"i",[],null,null,null,null,null)),(n()(),t["\u0275ted"](-1,null,["Google Play and the Google Play logo are trademarks of Google Inc."]))],null,null)}var Q=t["\u0275ccf"]("ng-component",U,function(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"ng-component",[],null,null,null,$,W)),t["\u0275did"](1,114688,null,0,U,[],null,null)],function(n,l){n(l,1,0)},null)},{},{},[]),Y=function(){function n(n,l){this.game=n,this.settings=l}return n.prototype.tileColor=function(n){var l=this.game.board[n[1]][n[0]];return l.highlighted()?"orange":l.markedMovable()?l.empty()?"yellow":"rgb(189, 104, 53)":(l.x+l.y)%2==0?"#e6cfaf":"#9b7b40"},n.prototype.pieceTopLocation=function(n){return this.coordinateToPercentage(this.settings.boardReversed?n.tile.x:n.tile.y)},n.prototype.pieceLeftLocation=function(n){return this.coordinateToPercentage(this.settings.boardReversed?this.settings.boardSize-1-n.tile.y:n.tile.x)},n.prototype.pieceImageUrl=function(n){return"images/chess/"+n.color+"-"+n.type+".png"},n.prototype.coordinateToPercentage=function(n){return 12.5*n+"%"},n.prototype.selectTile=function(n){!this.game.gamePaused&&this.game.activePlayer instanceof y&&this.game.board[n[1]][n[0]].select(this.game.activePlayer)},n}(),X=t["\u0275crt"]({encapsulation:0,styles:[["#board[_ngcontent-%COMP%], #pieces[_ngcontent-%COMP%], [_nghost-%COMP%]{display:block;position:absolute;width:100%;height:100%;top:0;left:0}.board-row[_ngcontent-%COMP%]{height:12.5%;width:100%}#pieces[_ngcontent-%COMP%]   div[_ngcontent-%COMP%], .board-tile[_ngcontent-%COMP%]{width:12.5%;height:100%;float:left}#pieces[_ngcontent-%COMP%]{pointer-events:none;z-index:5}#pieces[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:12.5%;height:12.5%;position:absolute;transition:top .5s ease-in-out 50ms,left .5s ease-in-out 50ms}#pieces[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%}"]],data:{animation:[{type:7,name:"fadeIn",definitions:[{type:0,name:"true",styles:{type:6,styles:{opacity:1},offset:null},options:void 0},{type:0,name:"void",styles:{type:6,styles:{opacity:0},offset:null},options:void 0},{type:1,expr:"* => *",animation:{type:4,styles:null,timings:"300ms"},options:null}],options:{}}]}});function J(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,0,"div",[["class","board-tile"]],[[4,"background",null]],[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.selectTile(n.context.$implicit)&&t),t},null,null))],null,function(n,l){n(l,0,0,l.component.tileColor(l.context.$implicit))})}function Z(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,2,"div",[["class","board-row"]],null,null,null,null,null)),(n()(),t["\u0275and"](16777216,null,null,1,null,J)),t["\u0275did"](2,278528,null,0,K.h,[t.ViewContainerRef,t.TemplateRef,t.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(n,l){n(l,2,0,l.context.$implicit)},null)}function nn(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"div",[],[[4,"top",null],[4,"left",null],[24,"@fadeIn",0]],null,null,null,null)),(n()(),t["\u0275eld"](1,0,null,null,0,"img",[],[[8,"src",4]],null,null,null,null))],null,function(n,l){var e=l.component;n(l,0,0,e.pieceTopLocation(l.context.$implicit),e.pieceLeftLocation(l.context.$implicit),void 0),n(l,1,0,e.pieceImageUrl(l.context.$implicit))})}function ln(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"div",[],[[4,"top",null],[4,"left",null],[24,"@fadeIn",0]],null,null,null,null)),(n()(),t["\u0275eld"](1,0,null,null,0,"img",[],[[8,"src",4]],null,null,null,null))],null,function(n,l){var e=l.component;n(l,0,0,e.pieceTopLocation(l.context.$implicit),e.pieceLeftLocation(l.context.$implicit),void 0),n(l,1,0,e.pieceImageUrl(l.context.$implicit))})}function en(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,2,"section",[["id","board"]],null,null,null,null,null)),(n()(),t["\u0275and"](16777216,null,null,1,null,Z)),t["\u0275did"](2,278528,null,0,K.h,[t.ViewContainerRef,t.TemplateRef,t.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(n()(),t["\u0275eld"](3,0,null,null,4,"section",[["id","pieces"]],null,null,null,null,null)),(n()(),t["\u0275and"](16777216,null,null,1,null,nn)),t["\u0275did"](5,278528,null,0,K.h,[t.ViewContainerRef,t.TemplateRef,t.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,ln)),t["\u0275did"](7,278528,null,0,K.h,[t.ViewContainerRef,t.TemplateRef,t.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(n,l){var e=l.component;n(l,2,0,e.settings.boardTilePositions),n(l,5,0,e.game.white.pieces),n(l,7,0,e.game.black.pieces)},null)}var tn=t["\u0275ccf"]("chess-board",Y,function(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"chess-board",[],null,null,null,en,X)),t["\u0275did"](1,49152,null,0,Y,[w,u],null,null)],null,null)},{},{},[]),on=e("WnaA"),un=e("/yY+"),rn=e("G6Az"),sn=e("t/Na"),an=e("W4xs"),cn=e("8kji"),hn=e("AtLt"),dn=e("XgB0"),pn=e("PCNd");e.d(l,"ChessModuleNgFactory",function(){return fn});var fn=t["\u0275cmf"](i,[],function(n){return t["\u0275mod"]([t["\u0275mpd"](512,t.ComponentFactoryResolver,t["\u0275CodegenComponentFactoryResolver"],[[8,[o.a,Q,tn]],[3,t.ComponentFactoryResolver],t.NgModuleRef]),t["\u0275mpd"](4608,K.k,K.j,[t.LOCALE_ID,[2,K.u]]),t["\u0275mpd"](4608,P.s,P.s,[]),t["\u0275mpd"](4608,on.LocalStorageService,on.LocalStorageService,["LOCAL_STORAGE_SERVICE_CONFIG"]),t["\u0275mpd"](4608,un.a,un.a,[on.LocalStorageService,t.PLATFORM_ID]),t["\u0275mpd"](4608,rn.a,rn.a,[sn.c,an.a]),t["\u0275mpd"](4608,cn.a,cn.a,[hn.b,on.LocalStorageService,sn.c]),t["\u0275mpd"](4608,u,u,[]),t["\u0275mpd"](4608,w,w,[u]),t["\u0275mpd"](1073742336,j.q,j.q,[[2,j.w],[2,j.o]]),t["\u0275mpd"](1073742336,K.b,K.b,[]),t["\u0275mpd"](1073742336,P.p,P.p,[]),t["\u0275mpd"](1073742336,P.e,P.e,[]),t["\u0275mpd"](1073742336,dn.LocalStorageModule,dn.LocalStorageModule,[]),t["\u0275mpd"](1073742336,pn.a,pn.a,[]),t["\u0275mpd"](1073742336,i,i,[]),t["\u0275mpd"](256,"LOCAL_STORAGE_SERVICE_CONFIG",{prefix:"voyacode",storageType:"localStorage"},[]),t["\u0275mpd"](1024,j.m,function(){return[[{path:"",component:U,children:[{path:"",component:Y}]}]]},[])])})},YuTi:function(n,l){n.exports=function(n){return n.webpackPolyfill||(n.deprecate=function(){},n.paths=[],n.children||(n.children=[]),Object.defineProperty(n,"loaded",{enumerable:!0,get:function(){return n.l}}),Object.defineProperty(n,"id",{enumerable:!0,get:function(){return n.i}}),n.webpackPolyfill=1),n}}}]);